<!DOCTYPE html> 
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ì´ìŠ¤íŠ¸íŒŒì›Œë©”íƒˆ:ë¶€ìŠ¤ë°”, ë™ë²„ìŠ¤ë°”, ë¶„ì „ë°˜, ë°°ì „ë°˜, ì„ê°€ê³µ, ê¹€í¬, í™”ì„±</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- íŒŒë¹„ì½˜: ë¸Œë¼ìš°ì € íƒ­/ë°” ì•„ì´ì½˜ ì§€ì • -->
<link rel="icon" type="image/png" sizes="32x32" href="/epmFavicon.png">
<link rel="shortcut icon" href="/favicon.ico">
	
<!-- âœ… SEO ê¸°ë³¸ ë©”íƒ€íƒœê·¸: ê²€ìƒ‰ì—”ì§„ ìƒ‰ì¸ ë° í´ë¦­ ìœ ë„ë¬¸êµ¬ ì„¤ì • -->
<meta name="keywords" content="ì´ìŠ¤íŠ¸íŒŒì›Œë©”íƒˆ, ë™ë²„ìŠ¤ë°”, ë¶€ìŠ¤ë°”, ë¶„ì „ë°˜, ë°°ì „ë°˜, ìˆ˜ë°°ì „ë°˜, ë¬´ê°ì „ ë¶„ì „ë°˜, ë¬´ê°ì „ ë°°ì „ë°˜, ë¬´ê°ì „ ë³€ì••ê¸°, ì„ê°€ê³µ, ì ˆê³¡, ê°€ê³µ, ë¹„ì² ê¸ˆì†, ê¸ˆì†, ì ˆë‹¨, í™”ì„±ê³µì¥, ê¹€í¬ê³µì¥, ê¹€í¬, í™”ì„±, ë™ë¶€ìŠ¤ë°”, ë¬´ê°ì „, ëˆ„ì„¤ì „ë¥˜ í†µì œì¥ì¹˜, ëˆ„ì„¤ì „ë¥˜">
<meta name="description" content="ì´ìŠ¤íŠ¸íŒŒì›Œë©”íƒˆì€ ë¶€ìŠ¤ë°”, ë²„ìŠ¤ë°”, ë™ë²„ìŠ¤ë°”, ë¶„ì „ë°˜, ìˆ˜ë°°ì „ë°˜, ì„ê°€ê³µ ê¹€í¬, í™”ì„± ë‹¤ì–‘í•œ í’ˆì¢…ê³¼ ë§ì¶¤ ì ˆë‹¨ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.">
<meta name="author" content="ì´ìŠ¤íŠ¸íŒŒì›Œë©”íƒˆ">
<meta name="robots" content="index, follow">

<!-- âœ… Open Graph (SNS ê³µìœ  ë¯¸ë¦¬ë³´ê¸° ì¹´ë“œ ì„¤ì •) -->
<meta property="og:title" content="ì´ìŠ¤íŠ¸íŒŒì›Œë©”íƒˆ:ë¶€ìŠ¤ë°”, ë™ë²„ìŠ¤ë°”, ë¶„ì „ë°˜, ë°°ì „ë°˜, ì„ê°€ê³µ, ê¹€í¬, í™”ì„±">
<meta property="og:image" content="https://chkim-epm.github.io/EPM/factory.png">
<meta property="og:url" content="https://www.eastpowermetal.com/">
<meta property="og:type" content="website">

<!-- âœ… íŠ¸ìœ„í„° ì¹´ë“œ ë©”íƒ€ -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="ì´ìŠ¤íŠ¸íŒŒì›Œë©”íƒˆ:ë¶€ìŠ¤ë°”, ë™ë²„ìŠ¤ë°”, ë¶„ì „ë°˜, ë°°ì „ë°˜, ì„ê°€ê³µ, ê¹€í¬, í™”ì„±">
<meta name="twitter:description" content="ì´ìŠ¤íŠ¸íŒŒì›Œë©”íƒˆì€ ë¶€ìŠ¤ë°”, ë²„ìŠ¤ë°”, ë™ë²„ìŠ¤ë°”, ë¶„ì „ë°˜, ìˆ˜ë°°ì „ë°˜, ì„ê°€ê³µ ê¹€í¬, í™”ì„± ë‹¤ì–‘í•œ í’ˆì¢…ê³¼ ë§ì¶¤ ì ˆë‹¨ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.">
<meta name="twitter:image" content="https://chkim-epm.github.io/EPM/factory.png">

<!-- âœ… ë„¤ì´ë²„/ì¼ë¶€ í¬ë¡¤ëŸ¬ í˜¸í™˜ ëª©ì ì˜ OG ë©”íƒ€ ë°˜ë³µ ì„ ì–¸ -->
<meta property="og:title" content="ì´ìŠ¤íŠ¸íŒŒì›Œë©”íƒˆ:ë¶€ìŠ¤ë°”, ë™ë²„ìŠ¤ë°”, ë¶„ì „ë°˜, ë°°ì „ë°˜, ì„ê°€ê³µ, ê¹€í¬, í™”ì„±">
<meta property="og:description" content="ì´ìŠ¤íŠ¸íŒŒì›Œë©”íƒˆì€ ë¶€ìŠ¤ë°”, ë²„ìŠ¤ë°”, ë™ë²„ìŠ¤ë°”, ë¶„ì „ë°˜, ìˆ˜ë°°ì „ë°˜, ì„ê°€ê³µ ê¹€í¬, í™”ì„± ë‹¤ì–‘í•œ í’ˆì¢…ê³¼ ë§ì¶¤ ì ˆë‹¨ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.">
<meta property="og:image" content="https://www.eastpowermetal.com/logo.png">
<meta property="og:url" content="https://www.eastpowermetal.com/">
<meta property="og:type" content="website">
	
<!-- âœ… ì‚¬ì´íŠ¸ ì†Œìœ ê¶Œ ê²€ì¦(ê²€ìƒ‰ ì½˜ì†”/ë„¤ì´ë²„ ì„œì¹˜ì–´ë“œë°”ì´ì €) -->
<meta name="google-site-verification" content="google444cc8347990b8a8"/>
<meta name="naver-site-verification" content="c2165f2b265182c8668d9374095a8bdcd78bf2c1" />

<!-- ì›¹í°íŠ¸: ë‚˜ëˆ”ëª…ì¡°/ë‚˜ëˆ”ê³ ë”• ë¡œë”© -->
<link href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo:wght@700&family=Nanum+Gothic&display=swap" rel="stylesheet">

<!-- ê³µí†µ ë„¤ë¹„/í‘¸í„° ìŠ¤íƒ€ì¼ -->
<link rel="stylesheet" href="common.css">

<!-- Supabase JS SDK v2: í´ë¼ì´ì–¸íŠ¸ì—ì„œ DB ì ‘ê·¼ìš© -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
/* ===========================================PC ê¸°ë³¸ ìŠ¤íƒ€ì¼====================================================*/

/* í˜ì´ì§€ ëŒ€í‘œ ì œëª© ìŠ¤íƒ€ì¼ */
h1 {
  text-align: center;       /* ê°€ìš´ë° ì •ë ¬ */
  margin: 2rem 0;           /* ìœ„/ì•„ë˜ ì—¬ë°± */
  font-size: 2rem;          /* ê¸€ì í¬ê¸° */
}

/* ================= ìƒí’ˆ ì¹´ë“œ ê·¸ë¦¬ë“œ ================= */
.product-grid {
  display: grid;                             /* ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ */
  grid-template-columns: repeat(auto-fill, 
                        minmax(320px, 1fr)); /* ìµœì†Œ 320px, ê³µê°„ ë”°ë¼ ìë™ ì¤„ë°”ê¿ˆ */
  gap: 1.5rem;                               /* ì¹´ë“œ ì‚¬ì´ ê°„ê²© */
  padding: 2rem;                             /* ê·¸ë¦¬ë“œ ë°”ê¹¥ ì—¬ë°± */
  max-width: 1200px;                         /* ì „ì²´ ë„ˆë¹„ ì œí•œ */
  margin: 0 auto;                            /* ê°€ìš´ë° ì •ë ¬ */
}

/* ================= ê°œë³„ ì¹´ë“œ ================= */
.product-card {
  background: #fff;                          /* ì¹´ë“œ ë°°ê²½ */
  border-radius: 8px;                        /* ë‘¥ê·¼ ëª¨ì„œë¦¬ */
  overflow: hidden;                          /* í…Œë‘ë¦¬ ë°– ìš”ì†Œ ê°€ë¦¼ */
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);     /* ì•½í•œ ê·¸ë¦¼ì */
  text-align: center;                        /* í…ìŠ¤íŠ¸ ì¤‘ì•™ ì •ë ¬ */
  transition: transform 0.3s, box-shadow 0.3s; /* hover ì• ë‹ˆë©”ì´ì…˜ */
  display: flex;                             /* ì„¸ë¡œ ì •ë ¬ì„ ìœ„í•œ flex */
  flex-direction: column;                    /* ìœ„â†’ì•„ë˜ ë°°ì¹˜ */
  justify-content: flex-start;               /* ìƒë‹¨ë¶€í„° ë°°ì¹˜ */
}

/* ================= ì¹´ë“œ Hover íš¨ê³¼ ================= */
.product-card:hover {
  transform: translateY(-5px);               /* ì‚´ì§ ë„ìš°ê¸° */
  box-shadow: 0 5px 15px rgba(0,0,0,0.2);    /* ê·¸ë¦¼ì ê°•ì¡° */
}

/* ================= ì¹´ë“œ ì•ˆ ì´ë¯¸ì§€ ================= */
.product-card img {
  width: 100%;                               /* ê°€ë¡œ í­ ì±„ì›€ */
  height: 280px;                             /* ê³ ì • ë†’ì´ */
  object-fit: cover;                         /* ë¹„ìœ¨ ìœ ì§€í•˜ë©° ì˜ë§ê²Œ ìë¥´ê¸° */
}

/* ================= ì¹´ë“œ ì •ë³´ ì˜ì—­ ================= */
.product-info {
  padding: 1rem;                             /* ë‚´ë¶€ ì—¬ë°± */
}

.product-info h2 {
  font-size: 1.2rem;                         /* ìƒí’ˆëª… í¬ê¸° */
  margin: 0.5rem 0;                          /* ìœ„/ì•„ë˜ ì—¬ë°± */
}

.product-info p {
  font-size: 0.9rem;                         /* ì„¤ëª… ê¸€ì í¬ê¸° */
  color: #555;                               /* íšŒìƒ‰ ê³„ì—´ í…ìŠ¤íŠ¸ */
  white-space: pre-line;   	 				 /* âœ… ì¤„ë°”ê¿ˆ(\n) ê·¸ëŒ€ë¡œ í‘œì‹œ */
}

.product-info a {
  display: inline-block;                     /* ë²„íŠ¼ í˜•íƒœ */
  margin-top: 0.5rem;
  padding: 0.4rem 0.8rem;
  background-color: #23585C;                 /* ë¸Œëœë“œ í†¤ ë²„íŠ¼ ë°°ê²½ */
  color: #fff;                               /* í° í…ìŠ¤íŠ¸ */
  text-decoration: none;                     /* ë°‘ì¤„ ì œê±° */
  border-radius: 4px;                        /* ë‘¥ê·¼ ëª¨ì„œë¦¬ */
  transition: background-color 0.3s;         /* hover ì „í™˜ */
}

.product-info a:hover {
  background-color: #2980b9;                 /* hover ì‹œ ìƒ‰ìƒ ë³€í™” */
}

/* ================= ì¹´ë“œ ì•ˆ í‘œ ================= */
.product-table {
  margin-top: 1rem;                          /* ìœ„ìª½ ì—¬ë°± */
  text-align: left;                          /* ì™¼ìª½ ì •ë ¬ */
}

.product-table table {
  width: 100%;                               /* ê°€ë¡œ ì±„ì›€ */
  border-collapse: collapse;                 /* í…Œì´ë¸” ì„  ê²¹ì¹¨ ì œê±° */
}

.product-table th,
.product-table td {
  padding: 0.4rem 0.6rem;                    /* ì…€ ì—¬ë°± */
  border-bottom: 1px solid #ddd;             /* êµ¬ë¶„ì„  */
}

.product-table th {
  background-color: #f9f9f9;                 /* í—¤ë” ë°°ê²½ */
  font-weight: bold;                         /* êµµì€ ê¸€ì */
}

.product-table td {
  color: #555;                               /* ì¼ë°˜ ì…€ í…ìŠ¤íŠ¸ ìƒ‰ìƒ */
}

/* ================= í˜ì´ì§€ë„¤ì´ì…˜ ================= */

/* í˜ì´ì§€ë„¤ì´ì…˜ ì»¨í…Œì´ë„ˆ (ê°€ìš´ë° ì •ë ¬, ì—¬ë°±) */
.pager{
  display:flex; gap:8px; justify-content:center; align-items:center;
  padding: 16px 0 28px;
}

/* í˜ì´ì§€ ë²„íŠ¼ ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
.page-btn{
  min-width: 38px; height: 38px; padding:0 10px; border:1px solid #e3e5e8;
  background:#fff; border-radius:10px; cursor:pointer; font: 14px/38px system-ui;
  box-shadow:0 1px 4px rgba(0,0,0,.04);
}
.page-btn:hover{ box-shadow:0 2px 10px rgba(0,0,0,.08); }

/* í˜„ì¬ í˜ì´ì§€ í™œì„±í™” ìŠ¤íƒ€ì¼ */
.page-btn.active{
  background:#23585C; color:#fff; border-color:#23585C; font-weight:700;
}

/* ë¹„í™œì„± ë²„íŠ¼(ì´ì „/ë‹¤ìŒ ê²½ê³„) */
.page-btn[disabled]{ opacity:.5; cursor:not-allowed; }

/* ìƒëµë¶€(...) í‘œì‹œ ìš”ì†Œ */
.page-ellipsis{
  padding:0 6px; color:#888; user-select:none;
}
/* ================= í˜ì´ì§€ë„¤ì´ì…˜ ë================= */

/* ========================================== ëª¨ë°”ì¼ ì „ìš© CSS ================================================= */

/* (ëª¨ë°”ì¼ ì „ìš© ë£°ì„ ì¶”ê°€í•˜ë ¤ë©´ ì´ ì•„ë˜ì— ì‘ì„±) */

/* =========================================== ëª¨ë°”ì¼ ì „ìš© CSS ================================================= */
 

  
</style>
</head>
<body>

<!-- ë„¤ë¹„ê²Œì´ì…˜ ë°”: ë¡œê³ /ìƒí˜¸ + ì£¼ìš” ë©”ë‰´ -->
<nav>
<div class="nav-logo">
  <a href="index.html" style="text-decoration:none; color:inherit;">
  <!-- EÂ·PÂ·M ê¸€ìë¥¼ ì¸ë¼ì¸ìœ¼ë¡œ ë¶™ì—¬ ê³µë°±/ì¤„ë°”ê¿ˆ ê°„ê²© ë¬¸ì œ ë°©ì§€ -->
    <span class="logo-e" style="color:green;">E</span><span class="logo-p" style="color:red;">P</span><span class="logo-m" style="color:blue;">M</span>
	(ì£¼)ì´ìŠ¤íŠ¸íŒŒì›Œë©”íƒˆ
  </a>
</div>

 <!-- ì˜¤ë¥¸ìª½ ë©”ë‰´ ì˜ì—­ -->
    <div class="nav-menu">
      <!-- íšŒì‚¬ì†Œê°œ: ë“œë¡­ë‹¤ìš´ ì„œë¸Œë©”ë‰´ í¬í•¨(has-sub) -->
      <div class="nav-item has-sub">
        <a href="companyHistory.html">íšŒì‚¬ì†Œê°œ</a>
        <!-- ì„œë¸Œ ë©”ë‰´: íšŒì‚¬ ì†Œê°œ / ì¡°ì§ë„ / ì¸ì‚¬ë§ -->
        <div class="nav-sub">
          <a href="companyHistory.html">íšŒì‚¬ ì†Œê°œ</a>
          <a href="orgChart.html">ì¡°ì§ë„</a>
          <a href="greeting.html">ì¸ì‚¬ë§</a>
        </div>
      </div>
      <!-- ì œí’ˆ í˜ì´ì§€ ë§í¬ -->
      <div class="nav-item"><a href="product.html">ë¶€ìŠ¤ë°”</a></div>
      <!-- ë¬´ê°ì „ ê¸°ìˆ  í˜ì´ì§€ -->
      <div class="nav-item"><a href="noElectrocution.html">ë¬´ê°ì „</a></div>
      <!-- ì˜¤ì‹œëŠ” ê¸¸ í˜ì´ì§€ -->
      <div class="nav-item"><a href="map.html">ì˜¤ì‹œëŠ” ê¸¸</a></div>
    </div>
  </nav>



<h1>ì œí’ˆ ëª©ë¡</h1>
<div class="nav-item" style="display:none;">
	<a href="/admin/productCategory.html">ì¹´í…Œê³ ë¦¬ í…ŒìŠ¤íŠ¸2</a>
</div>
<!-- ê²€ìƒ‰ë°”: ì œí’ˆëª…/ì„¤ëª…/ì¬ì§ˆ/ìš©ë„/ì¢…ë¥˜ë¥¼ í†µí•© ê²€ìƒ‰ -->
<div class="search-bar" style="max-width:1200px;margin:0 auto;padding:0 2rem 0;display:flex;gap:8px;align-items:center;">
  <input id="q" type="search" placeholder="ì œí’ˆëª…, ì„¤ëª…, ì¬ì§ˆ, ìš©ë„, ì¢…ë¥˜ ê²€ìƒ‰" style="flex:1;padding:10px 12px;border:1px solid #d0d7de;border-radius:8px;font-size:14px;">
  <button id="clearBtn" type="button" style="padding:10px 12px;border:0;border-radius:8px;cursor:pointer;background:#23585C;color:#fff;">ì´ˆê¸°í™”</button>
</div>
<!-- ê²€ìƒ‰ UI ë -->



<!-- ğŸ”„ ì œí’ˆ ì¹´ë“œ ëª©ë¡ì´ ë™ì ìœ¼ë¡œ ë Œë”ë  ì»¨í…Œì´ë„ˆ -->
<div class="product-grid"></div>
<!-- í˜ì´ì§€ë„¤ì´ì…˜ ì»¨í…Œì´ë„ˆ -->
<div id="pager" class="pager"></div>

<!-- í‘¸í„°: ì‚¬ì—…ì/ì—°ë½ì²˜ ì •ë³´ ê³ ì • í‘œê¸° -->
<footer>
  
  <p>
	<span class="logo-e" style="color:green;">E</span>
	<span class="logo-p" style="color:red; ">P</span>
	<span class="logo-m" style="color:blue;">M</span>
   (ì£¼)ì´ìŠ¤íŠ¸íŒŒì›Œë©”íƒˆ | ì£¼ì†Œ: ê²½ê¸°ë„ ê¹€í¬ì‹œ í†µì§„ì ìœ¨ë§ˆë¡œ 223ë²ˆê¸¸ 42 | ì „í™”: 031-985-6037 | ì´ë©”ì¼: chkim.epm@gmail.com</p>
  <p>Â© 2025 EAST POWER METAL. All Rights Reserved.</p>
    <!-- ì™¼ìª½ ë¡œê³  -->
  
</footer>

<!-- âœ… Supabaseì—ì„œ product í…Œì´ë¸”ì„ ë¶ˆëŸ¬ì™€ ì¹´ë“œ ë Œë” -->
<script>
  // Supabase í”„ë¡œì íŠ¸ URL/anon í‚¤ (í¼ë¸”ë¦­ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì œí•œ ê¶Œí•œìœ¼ë¡œ ì‚¬ìš©)
  const SUPABASE_URL = "https://cwwnarmrvpvjptytepdo.supabase.co";
  const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN3d25hcm1ydnB2anB0eXRlcGRvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE4NzU4NTUsImV4cCI6MjA3NzQ1MTg1NX0.5mvgA_gKdlRaebVRSFIUJRKgp51zke_nffQ2jc8Ad1g";

  // SDK ë¡œë“œ ì‹¤íŒ¨ ì‹œ ì‚¬ìš©ìì—ê²Œ ì•ˆë‚´
  if (typeof supabase === "undefined") {
    document.querySelector(".product-grid").innerHTML = "ì˜¤ë¥˜: supabase SDK ë¡œë”© ì‹¤íŒ¨";
    throw new Error("Supabase SDK not loaded");
  }
  // Supabase í´ë¼ì´ì–¸íŠ¸ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
  const sb = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

  /* í˜ì´ì§€ë„¤ì´ì…˜ ê¸°ë³¸ ì„¤ì •ê°’ */
  const PAGE_SIZE = 6;     // í•œ í˜ì´ì§€ ì¹´ë“œ ìˆ˜
  let currentPage = 1;     // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ

  // ê²€ìƒ‰ì–´ ìƒíƒœ(ì „ì—­ ë³´ê´€: í˜ì´ì§• ì‹œ ê²€ìƒ‰ ìœ ì§€)
  let currentQuery = "";

  /* ì¹´ë“œ HTMLì„ ë§Œë“¤ì–´ .product-grid ì»¨í…Œì´ë„ˆì— ì£¼ì… */
  function renderCards(items){
    const grid = document.querySelector(".product-grid");
    if (!items || items.length === 0){
      grid.innerHTML = "ë“±ë¡ëœ ì œí’ˆì´ ì—†ìŠµë‹ˆë‹¤.";
      return;
    }
    // ì œí’ˆ ì •ë³´ pë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¹´ë“œ í…œí”Œë¦¿ ìƒì„±
    grid.innerHTML = items.map(p => `
      <div class="product-card">
        <a href="detail.html?id=${p.id}" style="display:block">
          <img src="${p.image_url || ''}" alt="${(p.title || '').replace(/"/g,'&quot;')}" loading="lazy">
        </a>
        <div class="product-info">
          <h2>${p.title || '-'}</h2>
          <p>${p.description ? p.description : ''}</p>
          <div class="product-table">
            <table>
              <tbody>
                <tr><th>ì¬ì§ˆ</th><td>${p.material || '-'}</td></tr>
                <tr><th>ìš©ë„</th><td>${p.usage || '-'}</td></tr>
                <tr><th>ì¢…ë¥˜</th><td>${p.types || '-'}</td></tr>
				<!-- <tr><th>ê°€ê²©</th><td>${p.price ? Number(p.price).toLocaleString() : '-'}</td></tr> -->
              </tbody>
            </table>
          </div>
          <!-- ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™í•˜ëŠ” ë²„íŠ¼ -->
          <a href="detail.html?id=${p.id}">ìì„¸íˆ ë³´ê¸°</a>
        </div>
      </div>
    `).join("");
  }

  /* ì´ ê°œìˆ˜/í˜„ì¬ í˜ì´ì§€ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í˜ì´ì§€ë„¤ì´ì…˜ ë²„íŠ¼ ë Œë” */
  function renderPager(totalCount, page){
    const pager = document.getElementById("pager");
    const totalPages = Math.max(1, Math.ceil(totalCount / PAGE_SIZE));

    // ë²„íŠ¼ í…œí”Œë¦¿ í—¬í¼
    const btn = (p, label = p, {active=false, disabled=false}={}) =>
      `<button class="page-btn ${active?'active':''}" ${disabled?'disabled':''} data-p="${p}">${label}</button>`;
    const dots = `<span class="page-ellipsis">â€¦</span>`;

    // í‘œì‹œí•  í˜ì´ì§€ ì…‹ êµ¬ì„±(1 â€¦ p-1 p p+1 â€¦ last)
    const pages = [];
    const push = (x)=>pages.push(x);

    const addRange = (s,e)=>{
      for(let i=s;i<=e;i++) push(i);
    };

    const first = 1, last = totalPages;
    const left = Math.max(first, page-1);
    const right = Math.min(last, page+1);

    push(first);
    if (left > first+1) push("dots-left");
    addRange(Math.max(first+1, left), Math.min(last-1, right));
    if (right < last-1) push("dots-right");
    if (last !== first) push(last);

    // ì‹¤ì œ HTML ì¡°ë¦½
    let html = '';
    html += btn(Math.max(first, page-1), "â€¹", {disabled: page===first});
    for(const p of pages){
      if (p==="dots-left" || p==="dots-right"){ html += dots; continue; }
      html += btn(p, String(p), {active: p===page});
    }
    html += btn(Math.min(last, page+1), "â€º", {disabled: page===last});

    pager.innerHTML = html;

    // í˜ì´ì§€ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸(ì´ë²¤íŠ¸ ìœ„ì„)
    pager.onclick = (e)=>{
      const t = e.target;
      if (!t.classList.contains("page-btn")) return;
      const p = Number(t.dataset.p);
      if (!p || p===page) return;
      // ê²€ìƒ‰ì–´ ìœ ì§€í•œ ì±„ë¡œ í•´ë‹¹ í˜ì´ì§€ ë¡œë“œ
      loadProducts(p, currentQuery);
      // UX: í˜ì´ì§€ ì „í™˜ ì‹œ ìƒë‹¨ìœ¼ë¡œ ìŠ¤í¬ë¡¤
      window.scrollTo({top:0, behavior:'smooth'});
    };
  }


  /* ëª©ë¡ ë¡œë“œ: page(í˜ì´ì§€ ë²ˆí˜¸), q(ê²€ìƒ‰ì–´) */
  async function loadProducts(page=1, q=""){
    currentPage = page;
    currentQuery = q;

    const grid = document.querySelector(".product-grid");
    grid.innerHTML = "ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...";

    // Supabase range ê³„ì‚°(0-base index)
    const from = (page - 1) * PAGE_SIZE;
    const to   = from + PAGE_SIZE - 1;

    // ê¸°ë³¸ ì¿¼ë¦¬: ìµœì‹  ë“±ë¡ìˆœ(created_at desc), ì „ì²´ ê°œìˆ˜ count í¬í•¨
    let query = sb
      .from("product")
      .select("*", { count: "exact" })
      .order("created_at", { ascending: false })
      .range(from, to);

    // ê²€ìƒ‰ì–´ê°€ ìˆìœ¼ë©´ title/description/material/usage/types ì¤‘ í•˜ë‚˜ë¼ë„ ì¼ì¹˜(ILIKE)
    if (q && q.trim() !== "") {
      const term = q.trim();
      query = query.or(
        `title.ilike.%${term}%,description.ilike.%${term}%,material.ilike.%${term}%,usage.ilike.%${term}%,types.ilike.%${term}%`
      );
    }

    const { data, error, count } = await query;

    // ì˜¤ë¥˜ ì²˜ë¦¬
    if (error){
      grid.innerHTML = "DB ì¡°íšŒ ì˜¤ë¥˜: " + error.message;
      console.error("Supabase select error:", error);
      return;
    }

    // ëª©ë¡/í˜ì´ì§€ë„¤ì´ì…˜ ë Œë”
    renderCards(data);
    renderPager(count ?? 0, page);
  }

  // ë””ë°”ìš´ìŠ¤ ìœ í‹¸: ì…ë ¥ì´ ì ì‹œ ë©ˆì¶”ë©´ ì½œë°± ì‹¤í–‰(ì…ë ¥ í­ì£¼ ë°©ì§€)
  function debounce(fn, ms=300){
    let t; return (...args)=>{ clearTimeout(t); t=setTimeout(()=>fn(...args), ms); };
  }

  // ê²€ìƒ‰ ì…ë ¥/ì´ˆê¸°í™” ë²„íŠ¼ ì´ë²¤íŠ¸ ë°”ì¸ë”©
  const qInput  = document.getElementById("q");
  const clearBtn = document.getElementById("clearBtn");

  if (qInput) {
    // ì…ë ¥ 300ms ì •ì§€ ì‹œ ê²€ìƒ‰ ìˆ˜í–‰
    qInput.addEventListener("input", debounce(()=>{
      loadProducts(1, qInput.value);
    }, 300));
  }
  if (clearBtn) {
    // ê²€ìƒ‰ì–´ ë¹„ìš°ê³  1í˜ì´ì§€ ì¬ì¡°íšŒ
    clearBtn.addEventListener("click", ()=>{
      if (!qInput) return;
      qInput.value = "";
      loadProducts(1, "");
    });
  }

  // ìµœì´ˆ ë¡œë”©: ê²€ìƒ‰ì–´ ì—†ì´ 1í˜ì´ì§€
  loadProducts(1, "");

  // ë„¤íŠ¸ì›Œí¬/ê¶Œí•œ ë¬¸ì œë¡œ ì‘ë‹µ ì§€ì—°ë  ê²½ìš° ì‚¬ìš©ì ì•ˆë‚´(8ì´ˆ íƒ€ì„ì•„ì›ƒ)
  setTimeout(() => {
    const txt = document.querySelector(".product-grid")?.textContent || "";
    if (txt.includes("ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘")) {
      document.querySelector(".product-grid").innerHTML =
        "ì‹œê°„ ì´ˆê³¼: ë„¤íŠ¸ì›Œí¬/ê¶Œí•œ ë¬¸ì œì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì½˜ì†”(F12) â†’ Console/Network ë¡œê·¸ í™•ì¸í•´ ì£¼ì„¸ìš”.";
    }
  }, 8000);
</script>

</script> <!-- (ì›ë³¸ ìœ ì§€) ì¤‘ë³µ </script> íƒœê·¸ê°€ ìˆì–´ë„ ê¸°ëŠ¥ì—” ì˜í–¥ ì—†ìŒ -->

</body>
</html>



