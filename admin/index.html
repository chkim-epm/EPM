<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>상품 등록 관리자 페이지</title>

  <!-- Netlify Identity (로그인용) -->
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

  <!-- Netlify CMS -->
  <script src="https://unpkg.com/netlify-cms-app@latest/dist/netlify-cms.js"></script>

  <style>
    body {
      background: #0f172a;
      color: white;
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 60px;
    }
    h1 { font-size: 28px; margin-bottom: 15px; }
    p { margin-bottom: 25px; font-size: 16px; }
    button {
      padding: 10px 20px;
      font-size: 16px;
      background: #2563eb;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>상품 등록 관리자</h1>
  <p>GitHub 계정으로 로그인 후 상품을 등록할 수 있습니다.</p>

  <!-- 커스텀 로그인 버튼 -->
  <button id="btn-login">GitHub 로그인</button>

  <script>
    // Netlify Identity 초기화
    if (window.netlifyIdentity) {
      // Identity 준비
      window.netlifyIdentity.on("init", (user) => {
        if (user) {
          // 이미 로그인된 경우 → CMS로 바로 이동
          document.location.href = "/admin/";
        }
      });

      // 커스텀 로그인 버튼 클릭 시 로그인 팝업 열기
      document.getElementById("btn-login").addEventListener("click", () => {
        window.netlifyIdentity.open("login");
      });

      // 로그인 성공 이벤트 → CMS로 이동
      window.netlifyIdentity.on("login", () => {
        document.location.href = "/admin/";
      });
    }

    // CMS 초기화
    CMS.init();
  </script>
</body>
</html>
